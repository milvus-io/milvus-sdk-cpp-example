# Milvus SDK C++ Example - With Conan

This example demonstrates how to build a C++ application using the Milvus SDK with Conan package manager.

## Prerequisites

- CMake 3.14 or higher
- C++14 compatible compiler
- Conan package manager installed (see https://conan.io)

## Configuration

This example uses:
- **BUILD_FROM_CONAN=ON**: The milvus-sdk-cpp library will use Conan-managed dependencies (gRPC, Protobuf, Abseil, etc.)
- **Conan**: Manages all third-party dependencies

## Dependencies

The following packages are managed by Conan (see `conanfile.txt`):
- gRPC 1.67.1
- Protobuf 5.27.0
- Abseil 20240116.2
- nlohmann_json 3.11.3

## Build Instructions

```bash
# Build the project
make build

# Clean build artifacts
make clean
```

Or manually:

```bash
# Install Conan dependencies into the build directory
conan install . --output-folder=cmake_build --build=missing -s compiler.cppstd=14

# Configure and build with CMake
mkdir -p cmake_build && cd cmake_build
cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_TOOLCHAIN_FILE=conan_toolchain.cmake -DBUILD_FROM_CONAN=ON ../
make -j8
```

## Run

After successful build:

```bash
./cmake_build/my_program
```

## How It Works

1. **Conan** installs gRPC, Protobuf, and other dependencies
2. **CMake** uses the Conan toolchain file to find these packages
3. **FetchContent** downloads milvus-sdk-cpp from GitHub
4. **milvus-sdk-cpp** is configured with `BUILD_FROM_CONAN=ON`, so it uses the Conan-provided packages
5. The example application links against milvus_sdk library


## Generated Files

When you run `conan install`, it generates many files. **All of these are now placed in the `cmake_build/` directory** to keep your project root clean:

**Generated by Conan (in cmake_build/):**
- `*.cmake` files (~56 files) - CMake package configuration for dependencies
- `*.sh` files (~6 files) - Environment activation scripts
- `CMakePresets.json` - CMake presets file
- Build artifacts and intermediate files

**Generated by Conan (in project root):**
- `CMakeUserPresets.json` - Points to cmake_build/CMakePresets.json (auto-regenerated)

**Source files (keep in version control):**
- `CMakeLists.txt` - CMake configuration
- `conanfile.txt` - Conan dependencies specification
- `build.sh` - Build script
- `Makefile` - Make targets
- `src/main.cpp` - Source code

To remove all generated files: `make clean`
